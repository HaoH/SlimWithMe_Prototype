<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>轻卡伴侣 - 减重规划</title>
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body {
      font-family: "PingFang SC", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      background-color: white;
    }
    
    .info-container {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 100%;
      padding: 20px;
    }
    
    .progress-bar {
      height: 4px;
      background-color: #e2e8f0;
      border-radius: 2px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background-color: #48bb78;
      width: 100%;
    }
    
    .btn-primary {
      background-color: #48bb78;
      color: white;
      padding: 14px 20px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 18px;
      width: 100%;
      text-align: center;
    }
    
    .plan-section {
      background-color: white;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      margin-bottom: 16px;
      overflow: hidden;
    }
    
    .target-box {
      background: linear-gradient(to right, #48bb78, #38a169);
      color: white;
      padding: 20px;
      border-radius: 12px;
    }
    
    .progress-container {
      height: 8px;
      background-color: #e2e8f0;
      border-radius: 4px;
      overflow: hidden;
      margin: 8px 0;
    }
    
    .progress-bar-small {
      height: 100%;
      background-color: #48bb78;
      border-radius: 4px;
    }
    
    .metric-circle {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 4px;
    }
  </style>
</head>
<body>
  <div class="info-container">
    <div class="mt-4">
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
      <h1 class="text-2xl font-bold text-center text-gray-800 mt-8">您的减重规划</h1>
      <p class="text-center text-gray-600 mt-2">基于您的信息，我们为您制定了个性化的减重方案</p>
    </div>
    
    <div class="flex-grow overflow-auto py-6">
      <div class="max-w-sm mx-auto">
        <!-- 减重目标 -->
        <div class="target-box mb-6">
          <div class="flex items-start">
            <div class="w-12 h-12 rounded-full bg-white bg-opacity-20 flex items-center justify-center mr-4 flex-shrink-0">
              <i class="ri-award-line text-2xl"></i>
            </div>
            <div>
              <h3 class="font-bold text-lg mb-1">目标体重</h3>
              <div class="flex items-center text-2xl font-bold">
                <span id="targetWeight">58</span>
                <span class="text-base ml-1">公斤</span>
              </div>
              <p class="text-sm text-white text-opacity-80 mt-1">预计完成时间: <span id="completionDate">2024年3月15日</span></p>
            </div>
          </div>
        </div>
        
        <!-- 每日能量摄入 -->
        <div class="plan-section p-5 mb-6">
          <h3 class="font-bold text-lg mb-4 flex items-center">
            <i class="ri-fire-line text-green-500 mr-2"></i>
            每日能量摄入目标
          </h3>
          
          <div class="flex justify-between items-center mb-4">
            <span class="text-gray-600">基础代谢率 (BMR)</span>
            <span class="font-semibold" id="bmrValue">1350</span>
          </div>
          
          <div class="flex justify-between items-center mb-4">
            <span class="text-gray-600">活动消耗</span>
            <span class="font-semibold" id="activityValue">+450</span>
          </div>
          
          <div class="flex justify-between items-center mb-4">
            <span class="text-gray-600">减重调整</span>
            <span class="font-semibold text-red-500" id="deficitValue">-300</span>
          </div>
          
          <div class="h-px bg-gray-200 my-3"></div>
          
          <div class="flex justify-between items-center">
            <span class="font-bold">每日建议摄入</span>
            <span class="font-bold text-lg text-green-600" id="dailyCaloriesValue">1500 千卡</span>
          </div>
        </div>
        
        <!-- 餐食分配 -->
        <div class="plan-section p-5 mb-6">
          <h3 class="font-bold text-lg mb-4 flex items-center">
            <i class="ri-restaurant-line text-green-500 mr-2"></i>
            能量分配方案
          </h3>
          
          <div id="mealFrequencyTitle" class="text-sm bg-green-50 text-green-700 font-medium py-2 px-3 rounded-lg mb-4">
            每日三餐模式 (早餐+午餐+晚餐)
          </div>
          
          <!-- 动态生成餐食分配 -->
          <div id="mealDistributionContainer" class="space-y-4">
            <!-- 早餐 - 动态显示或隐藏 -->
            <div id="breakfastRow" class="flex justify-between items-center">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600 mr-2">
                  <i class="ri-sun-line"></i>
                </div>
                <span>早餐</span>
              </div>
              <div class="text-right">
                <div class="flex items-center">
                  <span id="breakfastPercentValue" class="text-sm text-gray-500 mr-2">20%</span>
                  <span id="breakfastCalorieValue" class="font-medium">300 千卡</span>
                </div>
                <div class="w-32 h-2 bg-gray-200 rounded-full mt-1">
                  <div id="breakfastProgressBar" class="h-full bg-yellow-500 rounded-full" style="width: 20%"></div>
                </div>
              </div>
            </div>
            
            <!-- 午餐 -->
            <div id="lunchRow" class="flex justify-between items-center">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-orange-600 mr-2">
                  <i class="ri-sun-foggy-line"></i>
                </div>
                <span>午餐</span>
              </div>
              <div class="text-right">
                <div class="flex items-center">
                  <span id="lunchPercentValue" class="text-sm text-gray-500 mr-2">40%</span>
                  <span id="lunchCalorieValue" class="font-medium">600 千卡</span>
                </div>
                <div class="w-32 h-2 bg-gray-200 rounded-full mt-1">
                  <div id="lunchProgressBar" class="h-full bg-orange-500 rounded-full" style="width: 40%"></div>
                </div>
              </div>
            </div>
            
            <!-- 下午茶 - 动态显示或隐藏 -->
            <div id="teaRow" class="flex justify-between items-center">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-600 mr-2">
                  <i class="ri-cup-line"></i>
                </div>
                <span>下午茶</span>
              </div>
              <div class="text-right">
                <div class="flex items-center">
                  <span id="teaPercentValue" class="text-sm text-gray-500 mr-2">10%</span>
                  <span id="teaCalorieValue" class="font-medium">150 千卡</span>
                </div>
                <div class="w-32 h-2 bg-gray-200 rounded-full mt-1">
                  <div id="teaProgressBar" class="h-full bg-green-500 rounded-full" style="width: 10%"></div>
                </div>
              </div>
            </div>
            
            <!-- 晚餐 -->
            <div id="dinnerRow" class="flex justify-between items-center">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 mr-2">
                  <i class="ri-moon-line"></i>
                </div>
                <span>晚餐</span>
              </div>
              <div class="text-right">
                <div class="flex items-center">
                  <span id="dinnerPercentValue" class="text-sm text-gray-500 mr-2">30%</span>
                  <span id="dinnerCalorieValue" class="font-medium">450 千卡</span>
                </div>
                <div class="w-32 h-2 bg-gray-200 rounded-full mt-1">
                  <div id="dinnerProgressBar" class="h-full bg-indigo-500 rounded-full" style="width: 30%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 运动建议 -->
        <div class="plan-section p-5 mb-6">
          <h3 class="font-bold text-lg mb-4 flex items-center">
            <i class="ri-walk-line text-green-500 mr-2"></i>
            建议运动量
          </h3>
          
          <div class="flex justify-between mb-4">
            <div class="flex-1 text-center">
              <div class="metric-circle bg-blue-100 text-blue-700">
                <i class="ri-footprint-line text-2xl"></i>
              </div>
              <p class="text-xs text-gray-500">每日步数</p>
              <p class="font-bold text-xl" id="stepsValue">8,000</p>
            </div>
            
            <div class="flex-1 text-center border-l border-r border-gray-200">
              <div class="metric-circle bg-green-100 text-green-700">
                <i class="ri-road-map-line text-2xl"></i>
              </div>
              <p class="text-xs text-gray-500">每日距离</p>
              <p class="font-bold text-xl" id="distanceValue">5.5 km</p>
            </div>
            
            <div class="flex-1 text-center">
              <div class="metric-circle bg-yellow-100 text-yellow-700">
                <i class="ri-time-line text-2xl"></i>
              </div>
              <p class="text-xs text-gray-500">每日活动</p>
              <p class="font-bold text-xl" id="timeValue">45 分钟</p>
            </div>
          </div>
          
          <p class="text-sm text-gray-600"><i class="ri-information-line text-green-500 mr-1"></i> 走路是最简单有效的运动方式，对膝盖压力小，易于坚持，符合您的减重目标。</p>
        </div>
      </div>
    </div>
    
    <div class="mb-10">
      <button id="completeBtn" class="btn-primary block shadow-lg">
        开始我的减重计划
        <i class="ri-arrow-right-line ml-2"></i>
      </button>
      <p class="text-sm text-gray-500 text-center mt-2">以上数据可随时在个人设置中调整</p>
    </div>
  </div>
  
  <script>
    // 从本地存储获取用户数据
    const mealFrequency = localStorage.getItem('mealFrequency') || '3';
    const mealDistribution = JSON.parse(localStorage.getItem('mealDistribution')) || {
      breakfast: 20,
      lunch: 40,
      tea: 10,
      dinner: 30
    };
    
    // 每日总热量（假设）
    const dailyCalories = 1500;
    
    // 更新餐食频率标题
    const mealFrequencyTitles = {
      '2': '每日两餐模式 (午餐+晚餐)',
      '3': '每日三餐模式 (早餐+午餐+晚餐)',
      '4': '每日四餐模式 (早餐+午餐+下午茶+晚餐)'
    };
    document.getElementById('mealFrequencyTitle').textContent = mealFrequencyTitles[mealFrequency];
    
    // 更新热量显示
    document.getElementById('dailyCaloriesValue').textContent = `${dailyCalories} 千卡`;
    
    // 更新餐食分配显示
    function updateMealDistribution() {
      // 隐藏所有行，然后根据选择的餐食次数显示相应行
      document.getElementById('breakfastRow').style.display = 'none';
      document.getElementById('lunchRow').style.display = 'none';
      document.getElementById('teaRow').style.display = 'none';
      document.getElementById('dinnerRow').style.display = 'none';
      
      // 根据餐食频率显示相应的餐食行
      switch (mealFrequency) {
        case '2':
          document.getElementById('lunchRow').style.display = 'flex';
          document.getElementById('dinnerRow').style.display = 'flex';
          break;
        case '3':
          document.getElementById('breakfastRow').style.display = 'flex';
          document.getElementById('lunchRow').style.display = 'flex';
          document.getElementById('dinnerRow').style.display = 'flex';
          break;
        case '4':
          document.getElementById('breakfastRow').style.display = 'flex';
          document.getElementById('lunchRow').style.display = 'flex';
          document.getElementById('teaRow').style.display = 'flex';
          document.getElementById('dinnerRow').style.display = 'flex';
          break;
      }
      
      // 更新每个餐食的百分比和热量
      updateMealRow('breakfast', mealDistribution.breakfast);
      updateMealRow('lunch', mealDistribution.lunch);
      updateMealRow('tea', mealDistribution.tea);
      updateMealRow('dinner', mealDistribution.dinner);
    }
    
    // 更新单个餐食行的显示
    function updateMealRow(meal, percent) {
      const calories = Math.round((percent / 100) * dailyCalories);
      
      document.getElementById(`${meal}PercentValue`).textContent = `${percent}%`;
      document.getElementById(`${meal}CalorieValue`).textContent = `${calories} 千卡`;
      document.getElementById(`${meal}ProgressBar`).style.width = `${percent}%`;
    }
    
    // 更新目标显示（假设数据）
    // 实际应用中，这些数据应该来自用户输入和计算
    function updateGoals() {
      document.getElementById('targetWeight').textContent = '58';
      document.getElementById('completionDate').textContent = '2024年3月15日';
      document.getElementById('bmrValue').textContent = '1350';
      document.getElementById('activityValue').textContent = '+450';
      document.getElementById('deficitValue').textContent = '-300';
      
      document.getElementById('stepsValue').textContent = '8,000';
      document.getElementById('distanceValue').textContent = '5.5 km';
      document.getElementById('timeValue').textContent = '45 分钟';
    }
    
    // 完成按钮事件
    document.getElementById('completeBtn').addEventListener('click', function() {
      // 存储用户的所有设置
      localStorage.setItem('setupComplete', 'true');
      
      // 跳转到行动页面
      window.location.href = 'action.html';
    });
    
    // 初始化页面
    updateMealDistribution();
    updateGoals();
  </script>
</body>
</html> 